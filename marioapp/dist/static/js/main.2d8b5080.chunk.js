(this.webpackJsonpmarioapp=this.webpackJsonpmarioapp||[]).push([[0],{216:function(e,t,a){e.exports=a(408)},221:function(e,t,a){},408:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(210),l=a.n(c),i=(a(221),a(7)),s=a(3),o=a(9),u=a(23),m=a.n(u),p=a(43),d=a(12),E=a(19),f=Object(d.compose)(Object(o.b)((function(e){var t=e.firestore.data.users,a=e.firebase.auth.uid;return{user:t?t[a]:null}}),{signOut:function(){return function(){var e=Object(p.a)(m.a.mark((function e(t,a,r){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getFirebase,r.getFirestore,c=n(),e.prev=2,e.next=5,c.auth().signOut();case 5:t({type:"LOGOUT_SUCCESS"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t({type:"LOGOUT_FAIL"});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a,r){return e.apply(this,arguments)}}()}}),Object(E.firestoreConnect)([{collection:"users"}]))((function(e){var t=e.signOut,a=e.user;return console.log(a),n.a.createElement("div",null,n.a.createElement("ul",{className:"right"},n.a.createElement("li",null,n.a.createElement(i.c,{to:"/createProject"},"New Project")),n.a.createElement("li",null,n.a.createElement("a",{onClick:t},"Logout")),n.a.createElement("li",null,n.a.createElement(i.c,{to:"/",className:"btn btn-floating pink lighten-1"},a&&a.initials))))})),b=function(e){return n.a.createElement("div",null,n.a.createElement("ul",{className:"right"},n.a.createElement("li",null,n.a.createElement(i.c,{to:"/signup"},"SignUp")),n.a.createElement("li",null,n.a.createElement(i.c,{to:"/signin"},"LogIn"))))},h=Object(o.b)((function(e){return{firebase:e.firebase}}),{})((function(e){var t=e.firebase.auth;return n.a.createElement("nav",{className:"nav-wrapper grey darken-3"},n.a.createElement("div",{className:"container"},n.a.createElement(i.b,{to:"/",className:"brand-logo"},"MarioPlan"),t.uid?n.a.createElement(f,null):n.a.createElement(b,null)))})),v=function(){return n.a.createElement("div",null,n.a.createElement("p",null,"Notifications"))},g=a(212),j=a.n(g),N=function(e){var t=e.project;return n.a.createElement("div",null,n.a.createElement("div",{className:"card z-depth-0 project-summary"},n.a.createElement("div",{className:"card-content grey-text text-darken-3"},n.a.createElement("span",{className:"card-title"},t.title),n.a.createElement("p",null,"Posted by ",t.authorFirstname," ",t.authorLastname),n.a.createElement("p",{className:"grey-text"},j()(t.createdAt.toDate()).calendar()))))},O=function(e){var t=e.projects;return n.a.createElement("div",null,n.a.createElement("div",{className:"project-list section"},t&&t.map((function(e){return n.a.createElement(i.b,{to:"/project/".concat(e.id),key:e.id},n.a.createElement(N,{project:e}))}))))},y=Object(d.compose)(Object(o.b)((function(e){return{projects:e.firestore.ordered.projects,auth:e.firebase.auth}})),Object(E.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.projects;return e.auth.uid?n.a.createElement("div",{className:"dashboard container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s12 m6"},n.a.createElement(O,{projects:t})),n.a.createElement("div",{className:"col s12 m5 offset-m1"},n.a.createElement(v,null)))):n.a.createElement(s.a,{to:"/signin"})})),x=Object(d.compose)(Object(o.b)((function(e,t){var a=t.match.params.id,r=e.firestore.data.projects;return{project:r?r[a]:null,auth:e.firebase.auth}})),Object(E.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.project;return e.auth.uid?n.a.createElement(r.Fragment,null,t?n.a.createElement("div",null,n.a.createElement("div",{className:"container section project-details"},n.a.createElement("div",{className:"card z-depth-0"},n.a.createElement("div",{className:"card-content"},n.a.createElement("span",{className:"card-title"},t.title),n.a.createElement("p",null,t.content)),n.a.createElement("div",{className:"card-action gret grey-text lighten-4"},n.a.createElement("div",null,"Posted by ",t.authorFirstname,t.authorLastname),n.a.createElement("div",null))))):n.a.createElement("div",{className:"container center"},n.a.createElement("p",null,"Loading Project..."))):n.a.createElement(s.a,{to:"/signin"})})),w=a(25),C=a(5),S=a(42),F=Object(o.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),{signIn:function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,r,n){var c,l,i,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.getFirestore,c=n.getFirebase,l=e.email,i=e.password,s=c(),t.prev=3,t.next=6,s.auth().signInWithEmailAndPassword(l,i);case 6:o=t.sent,console.log(o),a({type:"LOGIN_SUCCESS"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),a({type:"LOGIN_ERROR",payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a,r){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.authError,c=e.signIn,l=Object(r.useState)({email:"",password:""}),i=Object(S.a)(l,2),o=i[0],u=i[1],m=o.email,p=o.password,d=function(e){u(Object(C.a)(Object(C.a)({},o),{},Object(w.a)({},e.target.id,e.target.value)))};return t.uid?n.a.createElement(s.a,{to:"/"}):n.a.createElement("div",null,n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(o)},className:"white"},n.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",onChange:d,name:"email",value:m})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",value:p,onChange:d})),n.a.createElement("div",{className:"input-field"},n.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"LogIn"),n.a.createElement("div",{className:"red-text text-center"},a&&n.a.createElement("p",null,a.message))))))})),R=Object(o.b)((function(e){return{auth:e.firebase.auth}}),{signUp:function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,r,n){var c,l,i,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.getFirebase,l=n.getFirestore,i=c(),s=l(),t.prev=3,t.next=6,i.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:return o=t.sent,t.next=9,s.collection("users").doc(o.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]});case 9:o=t.sent,a({type:"SIGNUP_SUCCESS",payload:o}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),a({type:"SIGNUP_FAIL",payload:t.t0});case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,a,r){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.signUp,c=Object(r.useState)({email:"",password:"",firstName:"",lastName:""}),l=Object(S.a)(c,2),i=l[0],o=l[1],u=i.email,m=i.password,p=i.firstName,d=i.lastName,E=function(e){o(Object(C.a)(Object(C.a)({},i),{},Object(w.a)({},e.target.id,e.target.value)))};return t.uid?n.a.createElement(s.a,{to:"/"}):n.a.createElement("div",null,n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(i)},className:"white"},n.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",onChange:E,name:"email",value:u})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"firstName"},"First Name"),n.a.createElement("input",{type:"text",id:"firstName",onChange:E,name:"firstName",value:p})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"lastName"},"Last Name"),n.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:d,onChange:E})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",value:m,onChange:E})),n.a.createElement("div",{className:"input-field"},n.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Sign Up")))))})),I=Object(o.b)((function(e){return{auth:e.firebase.auth}}),{createProject:function(e,t){return function(){var a=Object(p.a)(m.a.mark((function a(r,n,c){var l,i,s,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.getFirebase,l=c.getFirestore,i=l(),s=n().firebase.profile,o=n().firebase.auth.uid,a.prev=4,a.next=7,i.collection("projects").add(Object(C.a)(Object(C.a)({},e),{},{authorFirstname:s.firstName,authorLastname:s.lastName,authorId:o,createdAt:new Date}));case 7:r({type:"CREATE_PROJECT",payload:e}),t.replace("/"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),r({type:"CREATE_PROJECT_ERROR",payload:a.t0});case 14:case"end":return a.stop()}}),a,null,[[4,11]])})));return function(e,t,r){return a.apply(this,arguments)}}()}})((function(e){var t=e.createProject,a=e.auth,c=e.history,l=Object(r.useState)({title:"",content:""}),i=Object(S.a)(l,2),o=i[0],u=i[1],m=function(e){return u(Object(C.a)(Object(C.a)({},o),{},Object(w.a)({},e.target.name,e.target.value)))},p=o.title,d=o.content;return a.uid?n.a.createElement("div",{className:"container"},n.a.createElement("form",{className:"white",onSubmit:function(e){return function(e){e.preventDefault(),t(o,c)}(e)}},n.a.createElement("h5",{className:"grey-text text-darken-3"},"Create a New Project"),n.a.createElement("div",{className:"input-field"},n.a.createElement("input",{type:"text",id:"title",name:"title",value:p,onChange:function(e){return m(e)}}),n.a.createElement("label",{htmlFor:"title"},"Project Title")),n.a.createElement("div",{className:"input-field"},n.a.createElement("textarea",{id:"content",name:"content",className:"materialize-textarea",value:d,onChange:function(e){return m(e)}}),n.a.createElement("label",{htmlFor:"content"},"Project Content")),n.a.createElement("div",{className:"input-field"},n.a.createElement("button",{className:"btn pink lighten-1"},"Create")))):n.a.createElement(s.a,{to:"/signin"})}));var P=function(){return n.a.createElement(i.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(h,null),n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:y}),n.a.createElement(s.b,{exact:!0,path:"/project/:id",component:x}),n.a.createElement(s.b,{exact:!0,path:"/signin",component:F}),n.a.createElement(s.b,{exact:!0,path:"/signup",component:R}),n.a.createElement(s.b,{exact:!0,path:"/createProject",component:I}))))},k=a(213),L=a(214),U={authError:null},A=a(215),_={projects:[]},G=a(56),T=Object(d.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"LOGIN_ERROR":case"SIGNUP_FAIL":case"LOGOUT_FAIL":return Object(C.a)(Object(C.a)({},e),{},{authError:r});case"SIGNUP_SUCCESS":case"LOGIN_SUCCESS":return Object(C.a)(Object(C.a)({},e),{},{authError:null});case"LOGOUT_SUCCESS":default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATE_PROJECT":return Object(C.a)(Object(C.a)({},e),{},{projects:[].concat(Object(A.a)(e.projects),[r])});case"CREATE_PROJECT_ERROR":return Object(C.a)({},e);default:return e}},firestore:G.firestoreReducer,firebase:E.firebaseReducer}),D=a(135),z=a.n(D);a(403),a(406);z.a.initializeApp({apiKey:"AIzaSyDdtKbxp3nWMkGRm6dG1htAnWmqGOD0mYI",authDomain:"reactreduxfirestore-48f7e.firebaseapp.com",databaseURL:"https://reactreduxfirestore-48f7e.firebaseio.com",projectId:"reactreduxfirestore-48f7e",storageBucket:"reactreduxfirestore-48f7e.appspot.com",messagingSenderId:"256272828689",appId:"1:256272828689:web:840072789d9f12970964b0",measurementId:"G-82YRL8XTCJ"});var J=z.a,W=[L.a.withExtraArgument({getFirestore:G.getFirestore,getFirebase:E.getFirebase})],M=Object(d.createStore)(T,{},Object(k.composeWithDevTools)(d.applyMiddleware.apply(void 0,W),Object(E.reactReduxFirebase)(J,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0}),Object(G.reduxFirestore)(J)));M.firebaseAuthIsReady.then((function(){l.a.render(n.a.createElement(o.a,{store:M},n.a.createElement(P,null)),document.getElementById("root"))}))}},[[216,1,2]]]);
//# sourceMappingURL=main.2d8b5080.chunk.js.map